\documentclass[a4paper,12pt]{article}
\usepackage[utf8]{inputenc}
% \usepackage[spanish]{babel}
\usepackage{hyperref}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{multirow}
%\usepackage{makeidx}
\usepackage{graphicx}
\usepackage{fancyhdr}
\usepackage{float}
\usepackage[table]{xcolor}
\definecolor{azulUC3M}{RGB}{0,0,102}
\definecolor{gray97}{gray}{.97}
\definecolor{gray90}{gray}{.90}
\definecolor{gray75}{gray}{.75}
\definecolor{gray45}{gray}{.45}
\usepackage{colortbl}
\setlength\arrayrulewidth{1pt}

% Define the Use Case table with UC3M colors

\newenvironment{uc3m-table}[2]
% Header of the table
{\def\tableID{#1}
 \def\tableCaption{#2}

 \begin{table}[!htbp]
   \centering
   \rowcolors{2}{gray90}{white}
   
   \begin{tabular}{
     !{\color{azulUC3M}\vline} p{3cm}
     !{\color{azulUC3M}\vline} p{10cm}
     !{\color{azulUC3M}\vline}}
     \arrayrulecolor{azulUC3M}
     \rowcolor{azulUC3M}
     
     \multicolumn{1}{l !{\color{white}\vline}}
     {\color{white}{\texttt{ID}}}
     & \multicolumn{1}{l}
       {\color{white}{\texttt{#1}}} \\ }
% Footer of the table
{ \hline
  \end{tabular}
  \caption{\tableCaption}
  \label{\tableID}
\end{table} }

\usepackage{caption}
% \DeclareCaptionFont{white}{\color{white}}
% \DeclareCaptionFormat{listing}{\colorbox{azulUC3M}{\parbox{\textwidth}{#1#2#3}}}
% \captionsetup[lstlisting]{format=listing,labelfont=white,textfont=white}

\usepackage{listings}
\lstset{ frame=Ltb,
     framerule=0pt,
     aboveskip=0.5cm,
     framextopmargin=3pt,
     framexbottommargin=3pt,
     framexleftmargin=0.2cm,
     xrightmargin=-0.7cm,
     xleftmargin=-0.5cm,
     belowcaptionskip=0.5cm,
     framesep=0pt,
     rulesep=0.2pt,
     backgroundcolor=\color{gray97},
     rulesepcolor=\color{black},
     %
     stringstyle=\ttfamily,
     showstringspaces = false,
     basicstyle=\fontsize{9pt}{12pt}\ttfamily,
     commentstyle=\color{gray45},
     keywordstyle=\bfseries,
     %
     breaklines=true,
   }

   \lstdefinestyle{haskell}{
     language=Haskell,
     numbers=left,
     numbersep=15pt,
     numberstyle=\tiny,
     numberfirstline=false,
   }

   \lstdefinestyle{shell}{
     escapeinside=\{\}
   }


\lstnewenvironment{listing}[1][]
{\lstset{#1}\pagebreak[0]}{\pagebreak[0]}

\usepackage[top=2cm]{geometry}
\pretolerance=2000
\tolerance=3000
\begin{document}

\begin{titlepage}
  \begin{sffamily}
  \color{azulUC3M}
  \begin{center}
    % \vspace*{-1cm}
    \begin{figure}[htb]
      \begin{center}
        \vspace*{0.6cm}
        \includegraphics[width=15cm]{img/Portada_Logo.png}
        \vspace*{1.6cm}
      \end{center}
    \end{figure}
    
  \begin{Large}
    Bachelor's Degree in Computer Science \& Engineering\\
  \end{Large}
  
  \begin{LARGE}
    2016/2017 \\
    \vspace*{2cm}
    \textsl{Bachelor Thesis}\\
  \end{LARGE}
    
    \begin{huge}
      \textbf{Agis: Heuristic Search Library \& Framework in Haskell} \\
      \rule{80mm}{0.1mm}\\
      \vspace*{1cm}
      Diego Vicente Martín\\
    \end{huge}
    
    \vspace*{1cm}
    \begin{Large}
      Supervisor\\
      Carlos Linares López\\
      Lugar y fecha de presentación prevista\\
    \end{Large}
  \end{center}
  \vspace*{3cm}
  \color{black}
  \includegraphics{img/creativecommons.png}\\
  \emph{[Incluir en el caso de interés en su publicación en el archivo abierto]}\\
  Esta obra se encuentra sujeta a la licencia Creative Commons
  \textbf{Reconocimiento - No Comercial - Sin Obra Derivada}
  
\end{sffamily}
\end{titlepage}


\pagestyle{fancy}
\fancyhead{} % Clear all header fields
\setlength\headheight{21.2pt}
\lhead{\hspace*{-0.3cm}\raisebox{-0.3\height}{
    \includegraphics[scale=0.44]{img/Portada_Logo.png}}}
\rhead{\color{azulUC3M} \texttt{Agis}: Heuristic Search in Haskell}

% \renewcommand{\tablename}{\textbf{Tabla}}
% \renewcommand{\figurename}{\textbf{Figura}}
% \renewcommand{\listtablename}{Índice de tablas}

\newpage

\tableofcontents

\newpage

\listoffigures

\listoftables

\lstlistoflistings

%Para imagenes
%\begin{figure}[H]
%\centering
%\includegraphics[scale=0.8]{imagenes/*.png}
%\caption{}
%\end{figure}

\newpage

\input{sections/0-abstract.tex}
\input{sections/1-introduction.tex}
\input{sections/2-state-art.tex}
\input{sections/3-objectives.tex}
\input{sections/4-development.tex}
\input{sections/5-testing.tex}
\input{sections/6-conclusions.tex}
\input{sections/7-future-work.tex}

\bibliographystyle{acm}
\bibliography{refs}

\end{document}
